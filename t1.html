<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Trabalho Prático 1 - Diogo Bortolini</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">
    
    <!-- Custom CSS for the '3 Col Portfolio' Template -->
    <link href="css/portfolio-item.css" rel="stylesheet">
  </head>

  <body>

    <nav class="navbar navbar-fixed-top navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://diogobortolini.github.io/sisdis/">Diogo Bortolini - Sistemas Distribuídos</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
          <ul class="nav navbar-nav">
            <li><a href="#imgt1a">Trabalho 1</a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container -->
    </nav>

    <div class="container">

      <div class="row">

        <div class="col-lg-12">
          <h1 class="page-header">Trabalho Prático 1 -  <small>Roteiro de Aprendizado Prático de Simulação de um algoritmo vCube</small></h1>
        </div>

      </div>

      <div class="row">

        <div class="col-md-8">
          <img class="img-responsive" src="images/tablet-coffee.jpg">
        </div>

        <div class="col-md-4">
          <h3>Descrição do Trabalho 1 - Relatório da Implementação</h3>
          <p class="text-justify">Implementação de um detector de falhas vCube no ambiente de simulação SMPL, exibindo os resultados para diversos valores de N e diversos eventos. Um evento consiste da mudança de estado de um ou mais processos. Para cada evento é exibido o número de testes executados e a latência para todos os processos corretos detectarem o evento. Cada processo mantém o vetor STATE[0..N-1] de contadores de eventos, inicializado em -1 (estado “unknown”). Assume-se que os processos são inicializados corretos (estado 0), a entrada correspondente ao próprio processo no vetor STATE[] do testador é setada para zero. Ao descobrir um novo evento em um nodo testado, o testador incrementa a entrada correspondente no vetor STATE[].</p>
          <!--<h3>Project Details</h3>
          <ul>
            <li>Lorem Ipsum</li>
            <li>Dolor Sit Amet</li>
            <li>Consectetur</li>
            <li>Adipiscing Elit</li>
          </ul>-->
        </div>     
        
      </div>   
      <div class="row">
      <div class="col-lg-12">
          <a name="img0"></a>
          <h3 class="page-header">Compilação e Uso</h3>
        </div>
        <div class="col-md-12">
          <p><strong>Descrição do Uso </strong></p>
          <p class="text-justify">Entre os arquivos existentes nes trabalho estão smpl.h (que contém o cabeçalho da biblioteca SMPL), smpl.c (próprio código fonte da biblioteca SMPL), rand.c (funções complementares da SMPL), o cisj.c	(que possuía o código fonte fornecido pelo professor para calculo da cisj e foi utilizado para o main do programa), além do makefile (que organiza e compila o programa)

          <p><strong>Arquivos de Tarefas</strong></p>
          <ul>
            <li><a href = "files/smpl.h.txt" target= "_blank">smpl.h</a></li>
            <li><a href = "files/smpl.c.txt" target= "_blank">smpl.c</a></li>
            <li><a href = "files/rand.c.txt" target= "_blank">rand.c</a></li>
            <li><a href = "files/cisj.c.txt" target= "_blank">cisj.c</a></li>
            <li><a href = "files/makefile.txt" target= "_blank">makefile</a></li>
          </ul>
          <p class="text-justify">Colocar os arquivos acima em um mesmo diretório e compilar com os comandos <code>make purge && make</code> (make purge irá excluir os arquivos atuais e make irá compilar. <br>
           Ocorrendo a compilação sem erros, basta executar o comando <strong>./cisj &#60;num_processos&#62; &#60;tempo_simulacao&#62;</strong>, por exemplo, <code>./cisj 8 300</code> para criar uma simulação com 8 processos e por 300ms.</div>

      </div>
      
            <div class="row">
      <div class="col-lg-12">
          <a name="img1"></a>
          <h3 class="page-header">Estruturas, Funções e Variáveis Globais</h3>
        </div>
        <div class="col-md-8">
          <a href="images/t1-code.jpg"><img class="img-responsive" src="images/t1-code.jpg"></a>
        </div>

        <div class="col-md-4">
          <p><strong>Apresentação das Estruturas, Funções e Variáveis Globais</strong></p>
          <p class="text-justify">O algoritmo possui algumas estruturas que foram implementadas de forma manter informações do nós e seus eventos. 
           A primeira estrutura é <strong>node_set</strong> que já foi disponibilizada pelo professor e tem por objetivo de de gerar o conjunto de nós, junto as funções 
            <strong>set_new</strong>, <strong>set_insert</strong>, <strong>set_merge</strong> e <strong>set_free</strong>, 
            sendo que as funções são utilizadas para criar, inserir, mesclar e limpar o conjunto de processos, respectivamente. São utilizadas principalmente na função <strong>cis<strong> que retorna a lista de processos (em
ordem) que devem ser testados pelo testador i nos clusters s=1,2,…,logN (onde N é o número de processos).
            Depois temos a estrutura <strong>st_cis</strong> que armazena a tabela dos clusters com base na estrutura mencionada anteriormente. Tal tabela é calculada pela função <strong>CriaCis</strong> e, portanto, uma vez criado o conjunto de nós e seus clusters é criado a matriz com os testes a serem executados através da função <strong>matrizTeste</strong>.
            Na sequância foi criada a estrutura <strong>st_no</strong> que possui informações do respectivo id do processo e os estados dos demais processos que tal id tem conhecimento.
            Por fim, a estrutura <strong>st_event</strong> que armazena as informações de evento de determinado processo, com isso é possível saber qual o tipo de evento que tal processo sofreu (FAULT ou RECOVERY), qual rodada de testes estava ocorrendo quando o evento aconteceu, e demais informações como latência, número do teste e a situação atual do evento.
            Entre as váriaveis globais temos <strong>st_no</strong> onde estão os processos (nós), o número de clusters (conforme a qunatidade de processos), uma várivel de controle chamad <strong>printar</strong> para saber quando imprimir os States dos processos (no caso, ele imprime apenas quando ocorre efetivamente alguma alterações do States do processo testando) e um ponteiro para inteiro (<strong>info_no</strong>) com resultados dos processos Corretos e falhos e ativos e, o número de processos (<strong>n</strong>).</p>
          
          <h3>Relatos da tarefa</h3>                    
          <p class="text-justify">Utilizando como base o código da tarefa 0, houve a necessidade de imprementar uma variável <i>int</i> que aloque o id do próximo processo (chamada de <i>proximo</i>). O id do próximo processo de <i>N-1</i> foi tratado para que seja o 0 (zero), para isso, foi usado <strong><i>proximo = (token + 1) % N</i></strong>. Foi criada a variável <i>situacao</i> que recebe um binário que representa o status do processo (0-> Correto e 1-> Falho). Testes removendo diferentes processos podem ser vistos nos logs.</p>
        </div>

      </div>
      
            <div class="row">
      <div class="col-lg-12">
           <a name="img2"></a>
          <h3 class="page-header">Tarefa 2</h3>
        </div>
        <div class="col-md-8">
          <a href="images/t2-code.jpg"><img class="img-responsive" src="images/t2-code.jpg"></a>
        </div>

        <div class="col-md-4">
          <h3>Descrição da Tarefa</h3>
          <p class="text-justify">O objetivo desta tarefa era cada processo correto executar testes até achar outro processo correto.</p>
          <h3>Arquivos da tarefa</h3>
          <ul>
            <li><a href = "files/tempo2.c.txt" target= "_blank">tempo2.c</a></li>
            <li><a href = "files/t2log0.txt" target= "_blank">log 0</a></li>
            <li><a href = "files/t2log1.txt" target= "_blank">log 1</a></li>
            <li><a href = "files/t2log2.txt" target= "_blank">log 2</a></li>
          </ul>
          <h3>Relatos da tarefa</h3>
          <p class="text-justify">Com base no código da Tarefa 1, foi implementado um laço <i>while</i> que executará enquanto o próximo processo a ser testado não for o próprio testador. Dentro do while, através de <i>if-else</i>, 
            verifica-se o processo a ser testado está Correto, se estiver o <i>while</i> é interrompido e as execuções seguem para o escalonador. Se o processo a ser testado estiver falho, o testador testa o próximo processo, até que encontre um correto ou até que o processo a ser testado seja ele mesmo (indicando que todos os demais processos estão falhos). Por fim, ainda se ocorrer a situação de todos os processos estiverem falhos, o testador encerra a buscar por um correto e aguardar o escalonador para testar mais tarde, se possível.</p>
        </div>

      </div>
      
      <div class="row">
      <div class="col-lg-12">
           <a name="img3"></a>
          <h3 class="page-header">Tarefa 3</h3>
        </div>
        <div class="col-md-8">
          <a href="images/t3-code.jpg"><img class="img-responsive" src="images/t3-code.jpg"></a><br /><br />
            <a href="images/t4-code2.jpg"><img class="img-responsive" src="images/t3-code2.jpg"></a>
        </div>

        <div class="col-md-4">
          <h3>Descrição da Tarefa</h3>
          <p class="text-justify">O objetivo desta tarefa era cada processo manter localmente o vetor State[N]. A entrada do vetor State[j] indica o estado do processo j. O estado de cada processo pode ser: -1 (unknown), 0 (correto) ou 1 (falho). Todos os processos iniciam com o State[N] com -1 (indicando estado “unknown”) exceto  o próprio processo que inicia com 0 (zero). Nesta tarefa ao executar um teste em um processo j, o testador atualiza a entrada correspondente no vetor State[j]. Em cada intervalo de testes, o vetor State[N] é exibido.</p>
          <h3>Arquivos da tarefa</h3>
          <ul>
            <li><a href = "files/tempo3.c.txt" target= "_blank">tempo3.c</a></li>
            <li><a href = "files/t3log0.txt" target= "_blank">log 0</a></li>
            <li><a href = "files/t3log1.txt" target= "_blank">log 1</a></li>
            <li><a href = "files/t3log2.txt" target= "_blank">log 2</a></li>
          </ul>
          <h3>Relatos da tarefa</h3>
          <p class="text-justify">Com base no código da tarefa 2, foi adicionado mais um membro na <i>struct</i>, um vetor de inteiros que armazenará o estado dos processos testados, chamado State[N] e foram implementadas duas funções iniciais: <i>limpaState</i> e <i>printState</i>. A primeira função é responsável como iniciar os estados de todos os processos para -1 (exceto o próprio processo que fica com 0) e é executada logo no início, antes dos processos realizarem os testes. Já a segunda função tem por objetivo exibir o estado atualizado (State) do processo testado na tela. Durante os testes, o testador veirifcar o status de um processo, seja Correto ou Falho e atualiza o <i>State</i> daquele processo. No final do intervalo de teste a função <i>printState</i> é invocada para mostrar os estados dos processos que o testador conhece.</p> 
        </div>

      </div>

            <div class="row">
      <div class="col-lg-12">
        <a name="img4"></a>
          <h3 class="page-header">Tarefa 4</h3>
        </div>
        <div class="col-md-8">
          <a href="images/t4-code.jpg"><img class="img-responsive" src="images/t4-code.jpg"></a><br /><br />
          <a href="images/t4-code2.jpg"><img class="img-responsive" src="images/t4-code2.jpg"></a>
        </div>

        <div class="col-md-4">
          <h3>Descrição da Tarefa</h3>
          <p class="text-justify">O objetivo desta tarefa era quando um processo correto testa outro processo correto obtém as informações do estado dos demais processos do sistema, processos do sistema exceto aqueles que testou nesta rodada, além do próprio testador.</p>
          <h3>Arquivos da tarefa</h3>
          <ul>
            <li><a href = "files/tempo4.c.txt" target= "_blank">tempo4.c</a></li>
            <li><a href = "files/t4log0.txt" target= "_blank">log 0</a></li>
            <li><a href = "files/t4log1.txt" target= "_blank">log 1</a></li>
            <li><a href = "files/t4log2.txt" target= "_blank">log 2</a></li>
          </ul>
          <h3>Relatos da tarefa</h3>
          <p class="text-justify">Iniciando através da tarefa 3, para tal tarefa foi adicionado uma nova variável de inicialização, chamada <i>limpaVerificados</i> que armazena quais os processos que um testador avaliou no intervalo de teste e foram falhos, antes de conseguir um processo Correto. O vetor na posição [j] armazena um inteiro 0 (para não verificado) e 1 (para verificado). Isso é necessário, pois ao testar um processo falho e se dirigir para um próximo Correto, o testador tem a informação atualizada armazenada sobre o processo que falhou, mas se receber as informações do processo correto, este enviará a informações desatualizada do processo falho e esta será sobrescrita incorretamente. Uma vez que a informação que ele possui é a mais recente/atualizada já que acabou de testar em relação a qualquer outro processo. Então com o vetor <i>verificados[N]</i>Antes do inicio dos testes ele preenche com zeros o vetor <i>verifica o testador obtém as informações de status do processo Coretto, desde que não seja seu próprio status ou de um que tenha verificado falho recentemente. Antes do inicio dos testes ele preenche com zeros o vetor <i>verificados[N].</i></p>
        </div>

      </div>
      
      <!-- <div class="row">

        <div class="col-lg-12">
          <h3 class="page-header">Related Projects</h3>
        </div>

        <div class="col-sm-3 col-xs-6">
        	<a href="#"><img class="img-responsive portfolio-item" src="http://placehold.it/500x300"></a>
        </div>

        <div class="col-sm-3 col-xs-6">
        	<a href="#"><img class="img-responsive portfolio-item" src="http://placehold.it/500x300"></a>
        </div>

        <div class="col-sm-3 col-xs-6">
        	<a href="#"><img class="img-responsive portfolio-item" src="http://placehold.it/500x300"></a>
        </div>

        <div class="col-sm-3 col-xs-6">
        	<a href="#"><img class="img-responsive portfolio-item" src="http://placehold.it/500x300"></a>
        </div>

      </div>-->

    </div><!-- /.container -->

    <div class="container">

      <hr>

      <footer>
        <div class="row">
          <div class="col-lg-12">
            <p>Copyright &copy; 2022</p>
          </div>
        </div>
      </footer>
      
    </div><!-- /.container -->

    <script src="js/jquery-1.10.2.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/my.js"></script>

  </body>

</html>
